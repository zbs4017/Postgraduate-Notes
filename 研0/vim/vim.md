## 基本操作
- 启动Vim后，vim在Normal模式下。
- 按下`i`键进入Insert模式(注：你会看到vim左下角有一个insert字样，这表示你可以以插入的方式输入了）
- 此时，你可以输入文本了，就像你用“记事本”一样。
- 如果你想返回Normal模式，请按`ESC`键。
  
现在，你就可以在insert和normal之间切换了。下面是一些简单的命令，用于保存文件和复制粘贴。
> - `i` → Insert模式，按`Esc`键返回Normal模式
> - `x` → 删除光标所在的一个字符
> - `:wq` → 存盘（w）+退出（q）
> - `dd` → 删除当前行，并且复制该行内容
> - `p` → 粘贴
> 
> 推荐
> - `hjkl` → 移动光标，类似于光标键（←↓↑→）
> - `help` <command> → 显示帮助

熟练掌握以上命令后就可以基本使用了vim了
## 一些Normal模式命令
1. 各种插入模式
   > - `a` → 在光标后插入
   > - `o` → 在当前行后插入新行
   > - `O` → 在当前行前插入新行
   > - `cw` → 删除从当前光标位置到该单词结尾处。（注：在中文情况下,一般是删除到标点符号或者空格的位置）

2. 快速光标移动
   > - `0` → 快速移动到行头
   > - `^` → 到本行第一个不是blank字符的位置（注：所谓blank字符就是空格，tab，换行，回车等）
   > - `$` → 到本行行尾
   > - `g_` → 到本行最后一个不是blank字符的位置。
 
3. 搜索和替换
   > - `/` → 进入搜索，输入字符后按下回车。vim会跳转到第一个匹配
   > - `n` → 按下`n`查找下一个
   > - `N` → 按下`N`查找上一个

   不仅如此，vim也可以支持正则表达式查找。

   > - `:s/old/new` → 用new替换行中首次出现的old
   > - `:s/old/new/g` → 用new替换行中所有的old
   > - `:n,m s/old/new/g` → 用new替换从n到m行里所有的old
   > - `:%s/old/new/g` → 用new替换当前文件里所有的old
   
   这里只是对搜索和替换功能的一些基本操作的介绍，关于搜索和替换   的其他功能和注意事项还有很多。

4. 拷贝粘贴
   拷贝粘贴在vim中和我们平时认为的Ctrl+C和Ctrl+V有一些不同。Vim对于复制，剪切，粘贴有它自己的一套术语。复制被叫做yank(y),剪切被叫做delete（d），以及粘贴被叫做put（p）。vim中自己有一块内存来存储自己保存的拷贝内容，这与系统剪切板有一些不同。下面我们将按照复制粘贴的流程来描述。
   1. 选择文本
      > - `v`+`hjkl`来选择文本，然后进行各种操作
      > - `V`选中该行         
  
   2. 复制y（ank）
      > - `y` 进行复制
      > - `yy` 复制当前行
       
      复制也可以和快速光标移动相结合，也可以和下文中相结N<command>合复制多行
      > - `yw` 复制当前单词
      > - `y$` 从当前位置复制到行尾
      > - `y0` 从当前位置复制到行首
      > - `y^` 从当前位置复制到第一个非空白字符
      > - `5yy` 复制从当前行开始的5行

    3. 粘贴：p(aste)
       > - `p`(小写) 在光标位置之后粘贴
       > - `P`(大写) 在光标位置之前粘贴

    4. 剪切
       > - `d` 剪切选中的内容

    5. 剪切板
        1. 默认剪切板
           vim提供12个剪贴板，它们的名字分别为vim有12个粘贴板,分别是`0`，`1`，`2`，……，`8`，`9`，`a`，`"`。如果开启了系统剪切板则会另外多出两个：`+`和`*`。使用`:reg`命令，可以查看各个粘贴板里的内容。
           在vim中简单用y只是复制到`"`（双引号)粘贴板里，同样用`p`粘贴的也是这个粘贴板里的内容。

        2. 复制和粘贴到指定剪贴板
           要将vim的内容复制到某个粘贴板，需要退出编辑模式，进入正常模式后，选择要复制的内容，然后按`"Ny`完成复制，其中N为粘贴板号（注意是按一下双引号然后按粘贴板号最后按y），例如要把内容复制到粘贴板a，选中内容后按`"ay`就可以了。
           要将vim某个粘贴板里的内容粘贴进来，需要退出编辑模式，在正常模式按`"Np`，其中N为粘贴板号。比如，可以按"5p将5号粘贴板里的内容粘贴进来，也可以按`"+p`将系统全局粘贴板里的内容粘贴进来。
        3. vim和系统剪切板交互
           当然我们可以使用Ctrl+C和Ctrl+V来进行操作，但是我们也可以使用上述的`+`和`*`来进行交互。

            - vim复制到系统剪贴板
              - "*y
              - "+y
              - "+2yy – 复制两行
            - vim剪切到系统剪贴板
              - "+dd – 剪切一行
            - 从系统剪贴板粘贴到vim
              - "*p
              - "+p
            `"+p`比 Ctrl+v 命令更好，它可以更快更可靠地处理大块文本的粘贴，也能够避免粘贴大量文本时，发生每行行首的自动缩进累积，因为Ctrl-v是通过系统缓存的stream处理，一行一行地处理粘贴的文本。

5. Undo/Redo
   > - u → undo
   > - Ctrl+r → redo
6. 打开/保存/退出/改变文件
   > - :e <path/to/file> → 打开一个文件
   > - :w → 存盘
   > - :q! → 退出不保存 
   > - :qa! 强行退出所有的正在编辑的文件，就算别的文件有更改。
   > - :bn 和 :bp → 你可以同时打开很多文件，使用这两个命令来切换下一个或上一个文件。（陈皓注：我喜欢使用:n到下一个文件）

以上命令可以极大地提升自己的效率，但需要时间熟悉。一旦你掌握他们了，你就几乎可以干其它编辑器都能干的事了。
## 更好，更强，更快

1. 更好
   `.` → (小数点) 可以重复上一次的命令
   `N<command>` → 重复某个命令N次
   下面有一些例子
   > - 2dd → 删除2行
   > - 3p → 粘贴文本3次
   
2. 更快
   你一定要记住光标的移动，因为很多命令都可以和这些移动光标的命令连动。很多命令都可以如下来干：
   > &lt; start position>&lt;command>&lt;end position>

   例如`0y$`命令意味着：
      - 0 → 先到行头
      - y → 从这里开始拷贝
      - $ → 拷贝到本行最后一个字符
   你可可以输入 `ye`，从当前位置拷贝到本单词的最后一个字符。
   (注：可视化选择是一个很有意思的命令，你可以先按v，然后移动光标，你就会看到文本被选择，然后，你可能d，也可y，也可以变大写等）

3. 更强
   使用一下的快捷键可以让你的光标更加有效率。
    1. N`G` → 到第 N 行 （注：注意命令中的G是大写的，另我一般使用 : N 到第N行，如 :137 到第137行）
    2. `gg`→ 到第一行。（注：相当于1G，或 :1）
    3. `G` → 到最后一行。
    4. 按单词移动
       - `w` → 到下一个单词的开头 
       - `e` → 到下一个单词的结尾

## vim特殊功能
1. 在当前行上移动光标0 → 到行头
   > - `^` → 到本行的第一个非blank字符
   > - `$` → 到行尾
   > - `g_`→ 到本行最后一个不是blank字符的位置。
   > - `fa` → 到下一个为a的字符处，你也可以fs到下一个为s的字符。
   > - `t`, → 到逗号前的第一个字符。逗号可以变成其它字符。
   > - `3fa` → 在当前行查找第三个出现的a。
   > - `F` 和 T → 和 f 和 t 一样，只不过是相反方向。
2. 分屏
   - 使用大写的O参数来垂直分屏。
     > vim -On file1 file2 ...
     
   - 使用小写的o参数来水平分屏。
     > vim -on file1 file2 ...

   (注: n是数字，表示分成几个屏。)
   - 关闭当前窗口
     > `:q`
     (注：关闭窗口还有其他按键，但是对于个人而言还是喜欢`：q`来退出)
   - 除这个窗口外全部关闭
     > `:only`
   - 打开文件垂直分屏
     > `:sp filename`
   - 打开文件水平分屏
     > `:vs filename`
   - 在几个分屏中移动
     > |      操作       |   效果        |
     > | :----:         |:----:         |
     > |[CTRL]  [W]  +  | 扩大窗口       |
     > |[CTRL]  [W]  -	| 缩小窗口       |
     > |[CTRL]  [W]  h	| 跳转到左边的窗口 |
     > |[CTRL]  [W]  j	| 跳转到下边的窗口 |
     > |[CTRL]  [W]  k	| 跳转到上边的窗口 |
     > |[CTRL]  [W]  l	| 跳转到右边的窗口 |

![键位图](vi-vim-cheat-sheet-sch.gif)